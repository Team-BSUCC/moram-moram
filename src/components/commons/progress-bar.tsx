'use client';

import { cva, type VariantProps } from 'class-variance-authority';
import { twMerge } from 'tailwind-merge';

const wrapperVariants = cva(
  'flex items-center w-full text-black transition-all',
  {
    variants: {
      size: {
        sm: 'text-[8px] sm:text-[9px] md:text-sm',
        default: 'text-[11px] sm:text-sm md:text-md',
        lg: 'text-md sm:text-mlg md:text-lg',
      },
    },
    defaultVariants: {
      size: 'default',
    },
  }
);

const barVariants = cva(
  'rounded-full h-3 place-item-center border border-lightgray bg-green-400',
  {
    variants: {
      height: {
        sm: 'h-2 md:h-3',
        default: 'h-3 md:h-4',
        lg: 'h-4 md:h-5',
      },
    },
    defaultVariants: {
      height: 'default',
    },
  }
);

type LinearProgressProps = VariantProps<typeof wrapperVariants> &
  VariantProps<typeof barVariants> & {
    value: number;
  };

/**
 * ÏßÅÏÑ† ÌîÑÎ°úÍ∑∏ÎûòÏä§Î∞î Í≥µÌÜµ Ïª¥Ìè¨ÎÑåÌä∏
 * @param value - ÏßÑÌñâÎ•† (%)
 * @param size - ÌÖçÏä§Ìä∏ ÌÅ¨Í∏∞
 * @param height - Î∞î ÎÜíÏù¥
 * @returns - ÏßÅÏÑ† ÌîÑÎ°úÍ∑∏ÎûòÏä§Î∞î
 */
const LinearProgress = ({ value, size, height }: LinearProgressProps) => {
  const progressLevelToSVG = (value: number): JSX.Element => {
    if (value < 30) return seedSvg;
    if (value < 60) return sproutSvg;
    if (value < 100) return flowerBudSvg;
    return flowerSvg;
  };

  const progressLevelToSentence = (value: number): string => {
    if (value < 30) return 'Ïù¥Ï†ú Îßâ ÏãúÏûëÌñàÏñ¥Ïöî. Ï∞®Í∑ºÏ∞®Í∑º Ìïú Ïπ∏Ïî© Ï±ÑÏõåÎ¥êÏöî :)';
    if (value < 60)
      return `Ï¥ù ${value}% ÏôÑÏÑ±! Ï°∞Í∏àÏî© ÏûêÎùºÍ≥† ÏûàÏñ¥Ïöî, Îß§ÏùºÏùò Ïã§Ï≤úÏùÄ ÌÅ∞ ÌûòÏù¥ ÎèºÏöî üí™`;
    if (value < 100)
      return `Ï¥ù ${value}% ÏôÑÏÑ±! ÎààÏóê ÎùÑÍ≤å ÏÑ±Ïû• Ï§ëÏù¥ÏóêÏöî! Î™©ÌëúÍ∞Ä Ï†êÏ†ê Í∞ÄÍπåÏõåÏßÄÍ≥† ÏûàÏñ¥Ïöî :)`;
    return 'Ï¥ù 100% ÏôÑÏÑ±! Î©ãÏßÄÍ≤å Ìï¥ÎÉàÏñ¥Ïöî! ÎãπÏã†Ïùò ÎÖ∏Î†•Ïù¥ ÍΩÉÏùÑ ÌîºÏõ†Ïñ¥Ïöî üéâüå∏';
  };

  const progressLevelToColor = (value: number): string => {
    if (value < 30) return 'bg-beige';
    if (value < 60) return 'bg-secondary';
    if (value < 100) return 'bg-pink-pigment';
    return 'bg-red-pigment';
  };

  return (
    <div className={twMerge(wrapperVariants({ size }), 'flex-col')}>
      {/* ÌÖçÏä§Ìä∏ ÏòÅÏó≠ */}
      <div className='flex place-items-center place-self-start'>
        <span className='whitespace-nowrap'></span>
        {progressLevelToSVG(value)}
        <span className='whitespace-nowrap'>
          {progressLevelToSentence(value)}
        </span>
      </div>
      {/* ÏßÑÌñâÎ∞î */}
      <div
        className={twMerge(
          'w-full overflow-hidden rounded-full border-2 border-lightgray bg-white'
        )}
      >
        <div
          className={twMerge(
            barVariants({ height }),
            `${progressLevelToColor(value)}`
          )}
          style={{ width: `${value}%` }}
        />
      </div>
    </div>
  );
};

const seedSvg = (
  <svg
    width='80'
    height='65'
    viewBox='0 0 80 65'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M48.8023 49.84C39.3989 42.4932 34.7883 21.3064 42.7406 14.562C51.354 9.9717 70.0954 22.5349 73.0235 33.6469C75.9515 44.7588 58.2057 57.1869 48.8023 49.84Z'
      fill='#C6906A'
      stroke='#202020'
      strokeWidth='2.58982'
    />
    <circle cx='48.7682' cy='41.1012' r='1.35124' fill='#202020' />
    <path
      d='M56.5677 44.9989C54.3258 45.9511 52.9187 43.8108 51.8726 43.533C50.3493 43.1284 50.1956 44.8554 51.89 45.9684C55.2782 48.1934 57.3317 47.1177 58.2615 46.112C59.2646 45.0272 57.8742 44.24 56.5677 44.9989Z'
      fill='#202020'
    />
    <path
      d='M24.9516 56.1411C32.1218 50.5391 35.6373 34.3841 29.5737 29.2415C23.0059 25.7414 8.71555 35.3209 6.48294 43.7937C4.25032 52.2666 17.7815 61.7431 24.9516 56.1411Z'
      fill='#C6906A'
      stroke='#202020'
      strokeWidth='2.28851'
    />
    <ellipse
      cx='1.19403'
      cy='0.597015'
      rx='1.19403'
      ry='0.597015'
      transform='matrix(-0.944509 0.328485 0.328485 0.944509 26.0059 48.5977)'
      fill='#202020'
    />
    <path
      d='M19.0306 52.4483C20.74 53.1744 21.813 51.5424 22.6107 51.3305C23.7721 51.022 23.8893 52.3389 22.5974 53.1876C20.0139 54.8841 18.4481 54.0639 17.7391 53.297C16.9742 52.4698 18.0344 51.8697 19.0306 52.4483Z'
      fill='#202020'
    />
  </svg>
);

const sproutSvg = (
  <svg
    width='80'
    height='66'
    viewBox='0 0 80 66'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M17.5335 19.633C39.5047 22.1534 44.9975 32.235 44.9975 36.9607C44.9975 19.066 60.8325 13.3513 68.75 13.7713C68.75 30.1539 52.915 36.7507 44.9975 36.9607C21.8386 38.725 17.0386 26.144 17.5335 19.633Z'
      fill='#4CB446'
    />
    <path
      d='M41.2861 65C42.7706 60.5893 45.5913 48.8065 44.9975 36.9607M44.9975 36.9607C44.9975 32.235 39.5047 22.1534 17.5335 19.633C17.0386 26.144 21.8386 38.725 44.9975 36.9607ZM44.9975 36.9607C52.915 36.7507 68.75 30.1539 68.75 13.7713C60.8325 13.3513 44.9975 19.066 44.9975 36.9607Z'
      stroke='#202020'
      strokeWidth='2.5'
      strokeLinejoin='round'
    />
  </svg>
);

const flowerBudSvg = (
  <svg
    width='80'
    height='66'
    viewBox='0 0 80 66'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      d='M51.7593 4.59599C59.9053 18.9779 52.106 47.9109 34.9477 40.8046C34.2077 40.2848 33.331 40.2294 32.7661 39.2818C25.8673 36.2926 18.1359 22.7003 45.8666 3.75L46.7273 9.16436C48.2609 7.69207 49.9348 6.16938 51.7593 4.59599Z'
      fill='#F6B2BB'
    />
    <path
      d='M33.561 65C32.6909 63.8455 31.7224 61.8111 31.2289 59.078M34.9477 40.8046C52.106 47.9109 59.9053 18.9779 51.7593 4.59599C49.9348 6.16938 48.2609 7.69207 46.7273 9.16436M34.9477 40.8046C34.2077 40.2848 33.331 40.2294 32.7661 39.2818M34.9477 40.8046C31.0329 47.9496 30.4445 54.7345 31.2289 59.078M32.7661 39.2818C25.8673 36.2926 18.1359 22.7003 45.8666 3.75L46.7273 9.16436M32.7661 39.2818C29.9785 34.606 30.5595 24.6856 46.7273 9.16436M31.2289 59.078C33.4506 55.8069 39.1071 49.5352 43.96 50.6181'
      stroke='#202020'
      strokeWidth='2.5'
      strokeLinejoin='round'
    />
  </svg>
);

const flowerSvg = (
  <svg
    width='80'
    height='68'
    viewBox='0 0 80 68'
    fill='none'
    xmlns='http://www.w3.org/2000/svg'
  >
    <path
      fillRule='evenodd'
      clipRule='evenodd'
      d='M42.511 39.4623C43.7949 39.8291 46.9131 39.5723 49.1142 35.6104C52.0489 35.2436 57.6983 33.1893 56.8179 27.9067C68.5567 25.1554 65.2551 17.4503 61.2203 17.4505C64.1546 8.97736 56.2679 10.6639 51.8658 13.0484C55.9006 2.37418 48.0139 2.77711 44.1621 4.79492C36.2383 -2.68869 32.7895 6.7763 34.2573 10.8486C27.8375 0.173049 22.7016 7.7304 22.1512 11.9491C10.2655 14.5904 17.9327 22.7339 22.7015 23.5047C14.9978 24.6052 16.8322 29.3371 19.9502 31.2084C20.7768 31.7045 21.5532 32.0358 22.1546 32.2924C22.6854 32.5189 23.0797 32.6872 23.2517 32.8592C25.0861 39.4623 33.8902 34.8768 35.3576 32.3089C35.7978 38.0317 40.3099 39.4623 42.511 39.4623ZM41.9607 25.1554C40.9992 25.8422 39.1941 26.673 37.9784 25.9376C37.7691 25.811 37.5772 25.6379 37.4101 25.4097C37.2519 25.1935 37.1159 24.9278 37.0083 24.6051C36.6058 23.3975 37.3075 22.7053 38.3056 22.4744C39.487 22.2012 41.0836 22.5744 41.7564 23.5047C42.0693 23.9374 42.1823 24.4906 41.9607 25.1554Z'
      fill='#F99695'
    />
    <path
      d='M37.0083 66.4253C37.7526 65.4742 38.6199 64.1634 39.4766 62.5722M42.511 39.4623C43.7949 39.8291 46.9131 39.5723 49.1142 35.6104C52.0489 35.2436 57.6983 33.1893 56.8179 27.9067M42.511 39.4623C40.3099 39.4623 35.7978 38.0317 35.3576 32.3089M42.511 39.4623C44.0457 44.45 43.8248 49.4098 42.8138 53.768M56.8179 27.9067C52.2323 27.3564 42.8412 26.0358 41.9607 25.1554M56.8179 27.9067C68.5567 25.1554 65.2551 17.4503 61.2203 17.4505C64.1546 8.97736 56.2679 10.6639 51.8658 13.0484M41.9607 25.1554C40.9992 25.8422 39.1941 26.673 37.9784 25.9376M41.9607 25.1554C42.1823 24.4906 42.0693 23.9374 41.7564 23.5047M35.3576 32.3089C35.8208 30.6293 36.9935 27.0035 37.9784 25.9376M35.3576 32.3089C33.8902 34.8768 25.0861 39.4623 23.2517 32.8592C23.0797 32.6872 22.6854 32.5189 22.1546 32.2924C21.5532 32.0358 20.7768 31.7045 19.9502 31.2084C16.8322 29.3371 14.9978 24.6052 22.7015 23.5047M37.9784 25.9376C37.7691 25.811 37.5772 25.6379 37.4101 25.4097M22.7015 23.5047C28.8644 22.6242 35.0752 24.4078 37.4101 25.4097M22.7015 23.5047C17.9327 22.7339 10.2655 14.5904 22.1512 11.9491C22.7016 7.7304 27.8375 0.173049 34.2573 10.8486M37.4101 25.4097C37.2519 25.1935 37.1159 24.9278 37.0083 24.6051C36.6058 23.3975 37.3075 22.7053 38.3056 22.4744M34.2573 10.8486C35.3054 12.363 37.5824 16.8085 38.3056 22.4744M34.2573 10.8486C32.7895 6.7763 36.2383 -2.68869 44.1621 4.79492C48.0139 2.77711 55.9006 2.37418 51.8658 13.0484M38.3056 22.4744C39.487 22.2012 41.0836 22.5744 41.7564 23.5047M51.8658 13.0484C50.9957 14.8834 47.7556 19.5437 41.7564 23.5047M42.8138 53.768C44.3638 48.8164 50.105 39.023 60.67 39.4623C59.3059 41.6191 57.6551 44.3704 56.8179 46.6146C54.8042 52.0122 47.2001 56.4762 42.3134 55.6707M42.8138 53.768C42.6634 54.4162 42.4956 55.0511 42.3134 55.6707M42.3134 55.6707C41.5434 58.2903 40.5179 60.6384 39.4766 62.5722M39.4766 62.5722C39.6338 60.6042 39.5741 58.1824 39.1449 55.6707M39.1449 55.6707C37.8143 47.8826 32.9317 39.2302 19.9502 40.5616C20.1497 40.9607 20.3458 41.403 20.5545 41.8736C21.8806 44.8642 23.7132 48.997 30.1419 50.4233C36.4296 51.8184 37.9796 53.7216 39.1449 55.6707Z'
      stroke='black'
      strokeWidth='2.5'
      strokeLinejoin='round'
    />
    <path
      fillRule='evenodd'
      clipRule='evenodd'
      d='M43.555 25.2587C41.9318 26.3773 38.8847 27.7304 36.8325 26.5326C36.4791 26.3264 36.1553 26.0445 35.8733 25.6728C35.6061 25.3207 35.3765 24.888 35.195 24.3625C34.5155 22.3959 35.7 21.2684 37.3849 20.8925C39.3791 20.4475 42.0744 21.0553 43.21 22.5703C43.7383 23.275 43.9291 24.176 43.555 25.2587Z'
      fill='#EDDF12'
      stroke='black'
      strokeWidth='2.5'
      strokeLinejoin='round'
    />
    <path
      d='M43.1009 53.738C44.6509 48.7864 50.3921 38.993 60.9572 39.4323C59.5931 41.5891 57.9423 44.3404 57.105 46.5846C55.0914 51.9822 47.4872 56.4462 42.6006 55.6407C41.8306 58.2603 40.805 60.6083 39.7638 62.5422C39.921 60.5742 39.8612 58.1524 39.4321 55.6407C38.2668 53.6916 36.7168 51.7884 30.429 50.3933C24.0003 48.967 22.1677 44.8342 20.8417 41.8436L20.8416 41.8436C20.633 41.373 20.4368 40.9307 20.2373 40.5316C33.2188 39.2002 38.1014 47.8526 39.4321 55.6407C39.8612 58.1524 39.921 60.5742 39.7638 62.5422C40.805 60.6083 41.8306 58.2603 42.6006 55.6407C42.7827 55.021 42.9506 54.3862 43.1009 53.738Z'
      fill='#AAD676'
    />
    <path
      d='M37.2955 66.3952C38.0398 65.4442 38.9071 64.1334 39.7638 62.5422M42.6006 55.6407C42.7827 55.021 42.9506 54.3862 43.1009 53.738C44.6509 48.7864 50.3921 38.993 60.9572 39.4323C59.5931 41.5891 57.9423 44.3404 57.105 46.5846C55.0914 51.9822 47.4872 56.4462 42.6006 55.6407ZM42.6006 55.6407C41.8306 58.2603 40.805 60.6083 39.7638 62.5422M39.7638 62.5422C39.921 60.5742 39.8612 58.1524 39.4321 55.6407M39.4321 55.6407C38.1014 47.8526 33.2188 39.2002 20.2373 40.5316C20.4368 40.9307 20.633 41.373 20.8417 41.8436C22.1677 44.8342 24.0003 48.967 30.429 50.3933C36.7168 51.7884 38.2668 53.6916 39.4321 55.6407Z'
      stroke='black'
      strokeWidth='2.5'
      strokeLinejoin='round'
    />
  </svg>
);

export default LinearProgress;
